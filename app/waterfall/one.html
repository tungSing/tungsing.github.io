<!DOCTYPE html>
<html>
<head>
	<title>one</title>
<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet">
<script type="text/javascript" src="../../js/src/app/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="../../js/src/app/imagesloaded.pkgd.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.xgallerify/latest/jquery.xgallerify.js"></script>
<script src="../../js/src/app/jquery.infinitescroll.min.js"></script>
<script src="../../js/src/app/masonry.pkgd.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
var $grid = $('#tiles').masonry({
  gutter:10,
  itemSelector: '.item',
  horizontalOrder: true,
  isFitWidth:true,//自适应宽度
  isResizableL:true,// 是否可调整大小
  isRTL:false,//使用从右到左的布局
  isAnimated:true
});

$grid.imagesLoaded().progress( function() {
     $grid.masonry();
});  



$('#tiles').infinitescroll({
  navSelector     : "#more",
  nextSelector    : "#more a",	
  extraScrollPx: 200,
  dataType: 'json',
  appendCallback: false,
  path: function(curPage){
	return 'data.json';
  },
  bufferPx:300
}, function(json, opts) {

  var page = opts.state.currPage;
  for (var i = 2; i >= 0; i--) {
  	var index = i + 5;

  }

var $newElems = $('<div class="item"> ' + 
	    	           '  <img src="http://img.infinitynewtab.com/wallpaper/'+Math.floor(1000*Math.random())+'.jpg" > '+
	   		           '</div>');

  $grid.append($newElems).masonry();
  console.log(123);
});





	

$("#btn").on('click',  function() {

	$('#tiles').gallerify({
	    margin: 5,
	    mode:'bootstrap',
	    lastRow:'adjust',
	});	

	$('#tiles').append('<div class="item"> ' + 
	    	           '  <img src="../../images/9.png" > '+
	   		           '</div>');
	$('#tiles').gallerify.renderAsyncImages();



	  	$('#tiles').append('<div class="item"> ' + 
	    	           '  <img src="http://img.infinitynewtab.com/wallpaper/'+Math.floor(1000*Math.random())+'.jpg" > '+
	   		           '</div>');
	  	$('#tiles').append('<div class="item"> ' + 
	    	           '  <img src="http://img.infinitynewtab.com/wallpaper/'+Math.floor(1000*Math.random())+'.jpg" > '+
	   		           '</div>');	  	




		
		console.log(123);
$('#tiles').gallerify.renderAsyncImages();


	
});



	
});
  

</script>

<style type="text/css">
/**
.item{
	border: 2px solid #000;
}
*/


/* clear fix */
.grid:after {
  content: '';
  display: block;
  clear: both;
}
.grid-sizer,
.item {
  width: 33.333%;

}

.item {
  border: 2px solid #000;
  float: left;
  margin-bottom: 10px;
}

.item img {
  display: block;
  max-width: 100%;
}
</style>

</head>
<body>

<div class="container">
	<div id="tiles" class="grid">
	    <div class="item">
	    	<img src="../../images/1.jpg">
	    </div>
	    <div class="item">
	    	<img src="../../images/2.jpg">
	    </div>
	    <div class="item">
	    	<img src="../../images/3.jpg">
	    </div>
	    <div class="item">
	    	<img src="../../images/4.png">
	    </div>
	    <div class="item">
	    	<img src="../../images/5.jpg">
	    </div>
	    <div class="item">
	    	<img src="../../images/6.jpg">
	    </div>
	    <div class="item">
	    	<img src="../../images/7.jpg">
	    </div>
	    <div class="item">
	    	<img src="../../images/9.png">
	    </div>		    

	</div>

</div>


<div id="more"><a href="#">more</a></div>

</body>
</html>